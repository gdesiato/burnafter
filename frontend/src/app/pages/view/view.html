<div class="page">
  <div class="container">
    <h1>Read now</h1>

    <div class="form">
      @if (openClicked && openError) {
        <div class="err">error: {{ openError }}</div>
      }

      @if (!opened) {
        <div>
          <div class="hint">
            @if (meta) {
              expires: {{ meta.expiresAt | date:'medium' }} Â· remaining views: {{ meta.remaining }}
            }
          </div>

          @if (hasPwdFragment) {
            <div style="margin:10px 0;">
              <label>Password<br>
                <input [(ngModel)]="password" type="password" class="in" autocomplete="current-password">
              </label>
            </div>
          }

          <button class="btn" (click)="open()" [disabled]="loadingMeta">open</button>
        </div>
      }

      @if (opened) {
        <pre #noteEl class="note" tabindex="-1">{{ content }}</pre>
      }
    </div>
  </div>
</div>
